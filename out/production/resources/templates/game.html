<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="'Gamelog - ' + ${game.name}"></title>
    <div th:replace="fragments/header"/>
    <script src="/js/game.js"></script>
</head>
<body>
<div th:replace="fragments/navbar"/>
<div th:if="${#httpServletRequest.remoteUser}" class="fixed-action-btn">
  <a class="btn-floating btn-large purple darken-4">
    <i class="large material-icons">add</i>
  </a>
  <ul>
    <li><a href="#modal1" id="add_to_list" class="btn-floating purple darken-3 tooltipped modal-trigger" data-position="left" data-tooltip="Add to list"><i class="material-icons">playlist_add</i></a></li>
    <li><a href="#new_entry" id="new_entry" class="btn-floating purple darken-3 tooltipped modal-trigger" data-position="left" data-tooltip="New entry"><i class="material-icons">mode_edit</i></a></li>
  </ul>
</div>

<!-- Add game to list modal -->
<div th:replace="fragments/addToList" />

<div class="container">
  <div class="center-align" id="game-info">
<h1 th:text="${game.name}"></h1>
<img th:src="${game.coverUrl} ? ${game.coverUrl} : '/images/nocover.png'" th:title="${game.name}"/>
<p th:text="${game.summary}"></p>
<h6>Favorites:</h6>
<p th:text="${game.favorites}"/>
<h6>Average Rating:</h6>
<p th:text="${game.averageRatings} ? ${game.averageRatings} : 'No ratings yet!'"/>
<h6>Plays:</h6>
<p th:text="${game.plays}+ ' users have played this game.'"/>
</div>

<div th:if="${#httpServletRequest.remoteUser}">
  <hr/>
    <div th:if="${entry}">
        <div th:replace="fragments/editEntry"/>
    </div>
    <div th:unless="${entry}">
        <div th:replace="fragments/addEntry"/>
    </div>
    <hr/>
</div>
<hr/>
<h2>User Entries</h2>
<table class="table">
    <tr>
        <th>User</th>
        <th>Favorite</th>
        <th>Date</th>
        <th>Review</th>
        <th>Rating</th>
    </tr>
    <tr th:each="entry : ${entries}">
        <div th:replace="fragments/entry"/>
    </tr>
</table>
</div>
</body>
</html>
